CREATE OR REPLACE FUNCTION sagitta.tr_audit_gd_coverages_u() 
RETURNS TRIGGER 
LANGUAGE plpgsql 
AS $$ 

BEGIN 
	INSERT INTO sagitta.audit_gd_coverages (
		 sagitem 
		,old_audit_staff_cd 
		,new_audit_staff_cd 
		,old_audit_entry_dt 
		,new_audit_entry_dt 
		,old_audit_time 
		,new_audit_time 
		,old_audit_cd 
		,new_audit_cd 
		,old_audit_history_record_number 
		,new_audit_history_record_number 
		,old_audit_program 
		,new_audit_program 
		,old_audit_effective_dt 
		,new_audit_effective_dt 
		,old_audit_change_agency_id 
		,new_audit_change_agency_id 
		,old_policy_seq_agency_id 
		,new_policy_seq_agency_id 
		,old_liability_symbol_1_cd 
		,new_liability_symbol_1_cd 
		,old_liability_symbol_2_cd 
		,new_liability_symbol_2_cd 
		,old_liability_symbol_3_cd 
		,new_liability_symbol_3_cd 
		,old_liability_symbol_4_cd 
		,new_liability_symbol_4_cd 
		,old_liability_symbol_5_cd 
		,new_liability_symbol_5_cd 
		,old_auto_only_liability_bi_limit 
		,new_auto_only_liability_bi_limit 
		,old_auto_only_liability_csl_limit 
		,new_auto_only_liability_csl_limit 
		,old_auto_only_liability_pd_limit 
		,new_auto_only_liability_pd_limit 
		,old_other_than_auto_only_liability_bi_limit 
		,new_other_than_auto_only_liability_bi_limit 
		,old_other_than_auto_only_liability_limit 
		,new_other_than_auto_only_liability_limit 
		,old_other_than_auto_only_liability_pd_limit 
		,new_other_than_auto_only_liability_pd_limit 
		,old_aggregate_other_than_auto_only_liability_limit 
		,new_aggregate_other_than_auto_only_liability_limit 
		,old_liability_deductible_amt 
		,new_liability_deductible_amt 
		,old_limited_liability_ind 
		,new_limited_liability_ind 
		,old_unlimited_liability_ind 
		,new_unlimited_liability_ind 
		,old_auto_only_premium_1_amt 
		,new_auto_only_premium_1_amt 
		,old_auto_only_premium_2_amt 
		,new_auto_only_premium_2_amt 
		,old_otherthan_auto_premium_1_amt 
		,new_otherthan_auto_premium_1_amt 
		,old_otherthan_auto_premium_2_amt 
		,new_otherthan_auto_premium_2_amt 
		,old_aggregate_other_than_auto_premium_1_amt 
		,new_aggregate_other_than_auto_premium_1_amt 
		,old_aggregate_other_than_auto_premium_2_amt 
		,new_aggregate_other_than_auto_premium_2_amt 
		,old_pip_no_fault_symbol_1_cd 
		,new_pip_no_fault_symbol_1_cd 
		,old_pip_no_fault_symbol_2_cd 
		,new_pip_no_fault_symbol_2_cd 
		,old_pip_no_fault_symbol_3_cd 
		,new_pip_no_fault_symbol_3_cd 
		,old_pip_no_fault_deductible_amt 
		,new_pip_no_fault_deductible_amt 
		,old_pip_no_fault_limit 
		,new_pip_no_fault_limit 
		,old_pip_no_fault_premium_amt 
		,new_pip_no_fault_premium_amt 
		,old_apip_symbol_1_cd 
		,new_apip_symbol_1_cd 
		,old_apip_symbol_2_cd 
		,new_apip_symbol_2_cd 
		,old_apip_symbol_3_cd 
		,new_apip_symbol_3_cd 
		,old_apip_limit 
		,new_apip_limit 
		,old_apip_deductible_amt 
		,new_apip_deductible_amt 
		,old_apip_premium_amt 
		,new_apip_premium_amt 
		,old_medical_payments_symbol_1_cd 
		,new_medical_payments_symbol_1_cd 
		,old_medical_payments_symbol_2_cd 
		,new_medical_payments_symbol_2_cd 
		,old_medical_payments_symbol_3_cd 
		,new_medical_payments_symbol_3_cd 
		,old_medical_payments_limit 
		,new_medical_payments_limit 
		,old_medical_payments_auto_ind 
		,new_medical_payments_auto_ind 
		,old_medical_payments_premises_operations_ind 
		,new_medical_payments_premises_operations_ind 
		,old_medical_payments_deductible_amt 
		,new_medical_payments_deductible_amt 
		,old_medical_payments_premium_1_amt 
		,new_medical_payments_premium_1_amt 
		,old_medical_payments_premium_2_amt 
		,new_medical_payments_premium_2_amt 
		,old_uninsured_motorist_symbol_1_cd 
		,new_uninsured_motorist_symbol_1_cd 
		,old_uninsured_motorist_symbol_2_cd 
		,new_uninsured_motorist_symbol_2_cd 
		,old_uninsured_motorist_symbol_3_cd 
		,new_uninsured_motorist_symbol_3_cd 
		,old_uninsured_motorist_liability_bi_limit 
		,new_uninsured_motorist_liability_bi_limit 
		,old_uninsured_motorist_liability_csl_limit 
		,new_uninsured_motorist_liability_csl_limit 
		,old_uninsured_motorist_liability_pd_limit 
		,new_uninsured_motorist_liability_pd_limit 
		,old_uninsured_motorist_deductible_amt 
		,new_uninsured_motorist_deductible_amt 
		,old_uninsured_motorist_premium_1_amt 
		,new_uninsured_motorist_premium_1_amt 
		,old_uninsured_motorist_premium_2_amt 
		,new_uninsured_motorist_premium_2_amt 
		,old_underinsured_motorist_symbol_1_cd 
		,new_underinsured_motorist_symbol_1_cd 
		,old_underinsured_motorist_symbol_2_cd 
		,new_underinsured_motorist_symbol_2_cd 
		,old_underinsured_motorist_symbol_3_cd 
		,new_underinsured_motorist_symbol_3_cd 
		,old_underinsured_motoist_per_person_limit 
		,new_underinsured_motoist_per_person_limit 
		,old_underinsured_motoist_eacj_accident_limit 
		,new_underinsured_motoist_eacj_accident_limit 
		,old_underinsured_motoist_pdt_limit 
		,new_underinsured_motoist_pdt_limit 
		,old_underinsured_motorist_deductible_amt 
		,new_underinsured_motorist_deductible_amt 
		,old_underinsured_motorist_premium_1_amt 
		,new_underinsured_motorist_premium_1_amt 
		,old_underinsured_motorist_premium_2_amt 
		,new_underinsured_motorist_premium_2_amt 
		,old_off_dt 
		,new_off_dt 
		,old_comprehensive_cov_ind 
		,new_comprehensive_cov_ind 
		,old_specified_perils_cov_ind 
		,new_specified_perils_cov_ind 
		,old_comprehensive_symbol_1_cd 
		,new_comprehensive_symbol_1_cd 
		,old_comprehensive_symbol_2_cd 
		,new_comprehensive_symbol_2_cd 
		,old_comprehensive_symbol_3_cd 
		,new_comprehensive_symbol_3_cd 
		,old_comprehensive_symbol_4_cd 
		,new_comprehensive_symbol_4_cd 
		,old_physical_damage_collision_symbol_1_cd 
		,new_physical_damage_collision_symbol_1_cd 
		,old_physical_damage_collision_symbol_2_cd 
		,new_physical_damage_collision_symbol_2_cd 
		,old_physical_damage_collision_symbol_3_cd 
		,new_physical_damage_collision_symbol_3_cd 
		,old_physical_damage_collision_symbol_4_cd 
		,new_physical_damage_collision_symbol_4_cd 
		,old_physical_damage_collision_limit 
		,new_physical_damage_collision_limit 
		,old_physical_damage_collision_deductible_amt 
		,new_physical_damage_collision_deductible_amt 
		,old_physical_damage_collision_premium_amt 
		,new_physical_damage_collision_premium_amt 
		,old_gargage_keepers_legal_liability_ind 
		,new_gargage_keepers_legal_liability_ind 
		,old_garagae_keepers_direct_basis_ind 
		,new_garagae_keepers_direct_basis_ind 
		,old_gargage_keepers_primary_ind 
		,new_gargage_keepers_primary_ind 
		,old_gargage_keepers_excess_ind 
		,new_gargage_keepers_excess_ind 
		,old_garagekeeps_other_than_collision_comprehensive_ind 
		,new_garagekeeps_other_than_collision_comprehensive_ind 
		,old_garagekeeps_other_than_collision_specified_perils_ind 
		,new_garagekeeps_other_than_collision_specified_perils_ind 
		,old_garagekeeps_other_than_collision_symbol_cd 
		,new_garagekeeps_other_than_collision_symbol_cd 
		,old_garagekeeps_collision_symbol_cd 
		,new_garagekeeps_collision_symbol_cd 
		,old_towing_labor_symbol_1_cd 
		,new_towing_labor_symbol_1_cd 
		,old_towing_labor_symbol_2_cd 
		,new_towing_labor_symbol_2_cd 
		,old_towing_labor_symbol_3_cd 
		,new_towing_labor_symbol_3_cd 
		,old_towing_labor_symbol_4_cd 
		,new_towing_labor_symbol_4_cd 
		,old_towing_labor_limit 
		,new_towing_labor_limit 
		,old_towing_labor_deductible_amt 
		,new_towing_labor_deductible_amt 
		,old_towing_labor_premium_amt 
		,new_towing_labor_premium_amt 
		,old_combined_physical_damage_symbol_1_cd 
		,new_combined_physical_damage_symbol_1_cd 
		,old_combined_physical_damage_symbol_2_cd 
		,new_combined_physical_damage_symbol_2_cd 
		,old_combined_physical_damage_symbol_3_cd 
		,new_combined_physical_damage_symbol_3_cd 
		,old_combined_phyiscal_damage_symbol_4_cd 
		,new_combined_phyiscal_damage_symbol_4_cd 
		,old_combined_phyisical_damage_limit 
		,new_combined_phyisical_damage_limit 
		,old_combined_phyisical_damage_deductible_amt 
		,new_combined_phyisical_damage_deductible_amt 
		,old_combined_phyisical_damage_premium_amt 
		,new_combined_phyisical_damage_premium_amt 
		,old_reporting_types 
		,new_reporting_types 
		,old_physical_damage_reporting_period_cd 
		,new_physical_damage_reporting_period_cd 
		,old_non_reporting_ind 
		,new_non_reporting_ind 
		,old_temporary_location_limit 
		,new_temporary_location_limit 
		,old_transit_limit 
		,new_transit_limit 
		,old_total_premium 
		,new_total_premium 
		,audit_action 
	)
	SELECT 	 OLD.sagitem 
			,OLD.audit_staff_cd 
			,NEW.audit_staff_cd 
			,OLD.audit_entry_dt 
			,NEW.audit_entry_dt 
			,OLD.audit_time 
			,NEW.audit_time 
			,OLD.audit_cd 
			,NEW.audit_cd 
			,OLD.audit_history_record_number 
			,NEW.audit_history_record_number 
			,OLD.audit_program 
			,NEW.audit_program 
			,OLD.audit_effective_dt 
			,NEW.audit_effective_dt 
			,OLD.audit_change_agency_id 
			,NEW.audit_change_agency_id 
			,OLD.policy_seq_agency_id 
			,NEW.policy_seq_agency_id 
			,OLD.liability_symbol_1_cd 
			,NEW.liability_symbol_1_cd 
			,OLD.liability_symbol_2_cd 
			,NEW.liability_symbol_2_cd 
			,OLD.liability_symbol_3_cd 
			,NEW.liability_symbol_3_cd 
			,OLD.liability_symbol_4_cd 
			,NEW.liability_symbol_4_cd 
			,OLD.liability_symbol_5_cd 
			,NEW.liability_symbol_5_cd 
			,OLD.auto_only_liability_bi_limit 
			,NEW.auto_only_liability_bi_limit 
			,OLD.auto_only_liability_csl_limit 
			,NEW.auto_only_liability_csl_limit 
			,OLD.auto_only_liability_pd_limit 
			,NEW.auto_only_liability_pd_limit 
			,OLD.other_than_auto_only_liability_bi_limit 
			,NEW.other_than_auto_only_liability_bi_limit 
			,OLD.other_than_auto_only_liability_limit 
			,NEW.other_than_auto_only_liability_limit 
			,OLD.other_than_auto_only_liability_pd_limit 
			,NEW.other_than_auto_only_liability_pd_limit 
			,OLD.aggregate_other_than_auto_only_liability_limit 
			,NEW.aggregate_other_than_auto_only_liability_limit 
			,OLD.liability_deductible_amt 
			,NEW.liability_deductible_amt 
			,OLD.limited_liability_ind 
			,NEW.limited_liability_ind 
			,OLD.unlimited_liability_ind 
			,NEW.unlimited_liability_ind 
			,OLD.auto_only_premium_1_amt 
			,NEW.auto_only_premium_1_amt 
			,OLD.auto_only_premium_2_amt 
			,NEW.auto_only_premium_2_amt 
			,OLD.otherthan_auto_premium_1_amt 
			,NEW.otherthan_auto_premium_1_amt 
			,OLD.otherthan_auto_premium_2_amt 
			,NEW.otherthan_auto_premium_2_amt 
			,OLD.aggregate_other_than_auto_premium_1_amt 
			,NEW.aggregate_other_than_auto_premium_1_amt 
			,OLD.aggregate_other_than_auto_premium_2_amt 
			,NEW.aggregate_other_than_auto_premium_2_amt 
			,OLD.pip_no_fault_symbol_1_cd 
			,NEW.pip_no_fault_symbol_1_cd 
			,OLD.pip_no_fault_symbol_2_cd 
			,NEW.pip_no_fault_symbol_2_cd 
			,OLD.pip_no_fault_symbol_3_cd 
			,NEW.pip_no_fault_symbol_3_cd 
			,OLD.pip_no_fault_deductible_amt 
			,NEW.pip_no_fault_deductible_amt 
			,OLD.pip_no_fault_limit 
			,NEW.pip_no_fault_limit 
			,OLD.pip_no_fault_premium_amt 
			,NEW.pip_no_fault_premium_amt 
			,OLD.apip_symbol_1_cd 
			,NEW.apip_symbol_1_cd 
			,OLD.apip_symbol_2_cd 
			,NEW.apip_symbol_2_cd 
			,OLD.apip_symbol_3_cd 
			,NEW.apip_symbol_3_cd 
			,OLD.apip_limit 
			,NEW.apip_limit 
			,OLD.apip_deductible_amt 
			,NEW.apip_deductible_amt 
			,OLD.apip_premium_amt 
			,NEW.apip_premium_amt 
			,OLD.medical_payments_symbol_1_cd 
			,NEW.medical_payments_symbol_1_cd 
			,OLD.medical_payments_symbol_2_cd 
			,NEW.medical_payments_symbol_2_cd 
			,OLD.medical_payments_symbol_3_cd 
			,NEW.medical_payments_symbol_3_cd 
			,OLD.medical_payments_limit 
			,NEW.medical_payments_limit 
			,OLD.medical_payments_auto_ind 
			,NEW.medical_payments_auto_ind 
			,OLD.medical_payments_premises_operations_ind 
			,NEW.medical_payments_premises_operations_ind 
			,OLD.medical_payments_deductible_amt 
			,NEW.medical_payments_deductible_amt 
			,OLD.medical_payments_premium_1_amt 
			,NEW.medical_payments_premium_1_amt 
			,OLD.medical_payments_premium_2_amt 
			,NEW.medical_payments_premium_2_amt 
			,OLD.uninsured_motorist_symbol_1_cd 
			,NEW.uninsured_motorist_symbol_1_cd 
			,OLD.uninsured_motorist_symbol_2_cd 
			,NEW.uninsured_motorist_symbol_2_cd 
			,OLD.uninsured_motorist_symbol_3_cd 
			,NEW.uninsured_motorist_symbol_3_cd 
			,OLD.uninsured_motorist_liability_bi_limit 
			,NEW.uninsured_motorist_liability_bi_limit 
			,OLD.uninsured_motorist_liability_csl_limit 
			,NEW.uninsured_motorist_liability_csl_limit 
			,OLD.uninsured_motorist_liability_pd_limit 
			,NEW.uninsured_motorist_liability_pd_limit 
			,OLD.uninsured_motorist_deductible_amt 
			,NEW.uninsured_motorist_deductible_amt 
			,OLD.uninsured_motorist_premium_1_amt 
			,NEW.uninsured_motorist_premium_1_amt 
			,OLD.uninsured_motorist_premium_2_amt 
			,NEW.uninsured_motorist_premium_2_amt 
			,OLD.underinsured_motorist_symbol_1_cd 
			,NEW.underinsured_motorist_symbol_1_cd 
			,OLD.underinsured_motorist_symbol_2_cd 
			,NEW.underinsured_motorist_symbol_2_cd 
			,OLD.underinsured_motorist_symbol_3_cd 
			,NEW.underinsured_motorist_symbol_3_cd 
			,OLD.underinsured_motoist_per_person_limit 
			,NEW.underinsured_motoist_per_person_limit 
			,OLD.underinsured_motoist_eacj_accident_limit 
			,NEW.underinsured_motoist_eacj_accident_limit 
			,OLD.underinsured_motoist_pdt_limit 
			,NEW.underinsured_motoist_pdt_limit 
			,OLD.underinsured_motorist_deductible_amt 
			,NEW.underinsured_motorist_deductible_amt 
			,OLD.underinsured_motorist_premium_1_amt 
			,NEW.underinsured_motorist_premium_1_amt 
			,OLD.underinsured_motorist_premium_2_amt 
			,NEW.underinsured_motorist_premium_2_amt 
			,OLD.off_dt 
			,NEW.off_dt 
			,OLD.comprehensive_cov_ind 
			,NEW.comprehensive_cov_ind 
			,OLD.specified_perils_cov_ind 
			,NEW.specified_perils_cov_ind 
			,OLD.comprehensive_symbol_1_cd 
			,NEW.comprehensive_symbol_1_cd 
			,OLD.comprehensive_symbol_2_cd 
			,NEW.comprehensive_symbol_2_cd 
			,OLD.comprehensive_symbol_3_cd 
			,NEW.comprehensive_symbol_3_cd 
			,OLD.comprehensive_symbol_4_cd 
			,NEW.comprehensive_symbol_4_cd 
			,OLD.physical_damage_collision_symbol_1_cd 
			,NEW.physical_damage_collision_symbol_1_cd 
			,OLD.physical_damage_collision_symbol_2_cd 
			,NEW.physical_damage_collision_symbol_2_cd 
			,OLD.physical_damage_collision_symbol_3_cd 
			,NEW.physical_damage_collision_symbol_3_cd 
			,OLD.physical_damage_collision_symbol_4_cd 
			,NEW.physical_damage_collision_symbol_4_cd 
			,OLD.physical_damage_collision_limit 
			,NEW.physical_damage_collision_limit 
			,OLD.physical_damage_collision_deductible_amt 
			,NEW.physical_damage_collision_deductible_amt 
			,OLD.physical_damage_collision_premium_amt 
			,NEW.physical_damage_collision_premium_amt 
			,OLD.gargage_keepers_legal_liability_ind 
			,NEW.gargage_keepers_legal_liability_ind 
			,OLD.garagae_keepers_direct_basis_ind 
			,NEW.garagae_keepers_direct_basis_ind 
			,OLD.gargage_keepers_primary_ind 
			,NEW.gargage_keepers_primary_ind 
			,OLD.gargage_keepers_excess_ind 
			,NEW.gargage_keepers_excess_ind 
			,OLD.garagekeeps_other_than_collision_comprehensive_ind 
			,NEW.garagekeeps_other_than_collision_comprehensive_ind 
			,OLD.garagekeeps_other_than_collision_specified_perils_ind 
			,NEW.garagekeeps_other_than_collision_specified_perils_ind 
			,OLD.garagekeeps_other_than_collision_symbol_cd 
			,NEW.garagekeeps_other_than_collision_symbol_cd 
			,OLD.garagekeeps_collision_symbol_cd 
			,NEW.garagekeeps_collision_symbol_cd 
			,OLD.towing_labor_symbol_1_cd 
			,NEW.towing_labor_symbol_1_cd 
			,OLD.towing_labor_symbol_2_cd 
			,NEW.towing_labor_symbol_2_cd 
			,OLD.towing_labor_symbol_3_cd 
			,NEW.towing_labor_symbol_3_cd 
			,OLD.towing_labor_symbol_4_cd 
			,NEW.towing_labor_symbol_4_cd 
			,OLD.towing_labor_limit 
			,NEW.towing_labor_limit 
			,OLD.towing_labor_deductible_amt 
			,NEW.towing_labor_deductible_amt 
			,OLD.towing_labor_premium_amt 
			,NEW.towing_labor_premium_amt 
			,OLD.combined_physical_damage_symbol_1_cd 
			,NEW.combined_physical_damage_symbol_1_cd 
			,OLD.combined_physical_damage_symbol_2_cd 
			,NEW.combined_physical_damage_symbol_2_cd 
			,OLD.combined_physical_damage_symbol_3_cd 
			,NEW.combined_physical_damage_symbol_3_cd 
			,OLD.combined_phyiscal_damage_symbol_4_cd 
			,NEW.combined_phyiscal_damage_symbol_4_cd 
			,OLD.combined_phyisical_damage_limit 
			,NEW.combined_phyisical_damage_limit 
			,OLD.combined_phyisical_damage_deductible_amt 
			,NEW.combined_phyisical_damage_deductible_amt 
			,OLD.combined_phyisical_damage_premium_amt 
			,NEW.combined_phyisical_damage_premium_amt 
			,OLD.reporting_types 
			,NEW.reporting_types 
			,OLD.physical_damage_reporting_period_cd 
			,NEW.physical_damage_reporting_period_cd 
			,OLD.non_reporting_ind 
			,NEW.non_reporting_ind 
			,OLD.temporary_location_limit 
			,NEW.temporary_location_limit 
			,OLD.transit_limit 
			,NEW.transit_limit 
			,OLD.total_premium 
			,NEW.total_premium 
			,'U';
	RETURN OLD;
END;
$$;
GO 

/*** PERMISSIONS ***/
ALTER FUNCTION sagitta.tr_audit_gd_coverages_u() OWNER TO mj_admin;
GO 

GRANT EXECUTE ON FUNCTION sagitta.tr_audit_gd_coverages_u() TO rl_sagitta_x;
GO 